# 视频管理，拆解的模型设计

## 概述

为视频/素材管理平台，以及自动化分析和打标设计的一套模型，主要场景包括：

1. **素材管理**：方便管理和搜索镜头、镜头组、素材/成片，可以按照分类、标签，甚至是语义来搜索
2. **AI智能创作**：为AI智能创作提供结构化的信息，在智能剪辑的场景中，AI可以根据脚本来搜寻合适的镜头/镜头组，并自动剪辑成片

## 数据模型设计

### 层级结构
- **video（视频）**：视频文件，主要包含基础固有属性，比如URL、上传日期、创作者、时长、类型（成片/片段）等
- **shot_sequence（镜头组）**：一组镜头序列，通常代表一个业务意图，或者一个叙事意图，比如：开场勾子、展示设计、效果展示等
- **shot（镜头）**：单一镜头，从镜头语言、画面内容来描述一个镜头

### 1. Video（视频）

```json
{
  "video_id": "VID001",
  "version": "0.1",
  "name": "视频名称",
  "desc": "对视频的文字描述",
  
  "duration": 120,
  "file_format": "mp4",
  "resolution": "1920x1080",
  "frame_rate": 30,
  "file_size_mb": 45.2,
  "storage_path": "/videos/project1/shot123.mp4",
  "created_by": "jack",
  "created_method": "upload | from_tiktok | from_facebook",
  "original_source": "http://tiktok/xxxxx",
  "created_time": "2024-05-27:000000",
  "last_updated_time": "2024-05-27:000000",

  "type": "raw_material | final_cut | rough_cut",
  "script_structure": "前后对比 | a-b-c-d | anyother",

  "products": ["产品A", "产品B"],
  "overall_mood": "快乐 | 兴奋 | 平静",

  "marketing_objective": "conversion | awareness | retention", 

  "tags": {
    "user_defined_tag1": "value", 
    "user_defined_tag2": "value"
  }
}
```

### 2. Shot Sequence（镜头组/镜头序列）

```json
{
  "sequence_id": "VID001_SQ001",
  "video_id": "VID001",
  "desc": "展示用户第一次打开产品包装的惊喜过程",
  "start_time": "00:01:23.450",
  "end_time": "00:01:30.200",
  "duration": 120,

  "narrative_function": [
    "产品功能展示", "品牌形象", "用户证言", "活动预告", 
    "节日促销", "使用教程", "情感共鸣", "问题展现", 
    "效果展现", "号召行动"
  ],

  "contained_shots": [
    "VID001_SQ001_SH001", 
    "VID001_SQ001_SH002",
    "VID001_SQ001_SH003"
  ],

  "summary": "简短描述整个镜头内容（20-50字）",
  "detailed_desc": "详细描述，包括画面主体、动作、环境氛围、色彩风格等（100-200字）",
  "content_vector": "对detailed_desc的向量表示（用于语义搜索）",

  "tags": {
    "user_defined_tag1": "value", 
    "user_defined_tag2": "value"
  }
}
```

### 3. Shot（镜头）

```json
{
  "shot_id": "VID_001_SQ01_SH01",
  "video_id": "VID_001",
  "sequence_id": "VID001_SQ001",
  "start_time": "00:01:23.450",
  "end_time": "00:01:30.200",
  "duration": 6.75,

  "scene_type": "室内 | 室外 | 水下 | 空中 | 动作 | 对话 | 风景 | 广告风格 | 特技 | 微距",
  "main_subjects": ["人物", "动物", "物品", "场景元素", "食物", "交通工具", "文字/图形"],
  "objects": ["手机", "电脑", "书本", "汽车", "自行车", "咖啡杯", "家具", "乐器", "运动器材", "护肤品", "化妆品", "女模特"],
  "actions": ["行走", "奔跑", "跳跃", "微笑", "挥手", "交谈", "驾驶", "使用产品", "工作", "运动", "舞蹈", "烹饪", "阅读"],
  "emotions": ["快乐", "兴奋", "平静", "紧张", "悲伤", "愤怒", "惊讶", "恐惧", "浪漫", "自信", "满足", "困惑"],

  "shot_category": "a-roll | b-roll | transition | establishing | insert | cutaway",
  "camera_angle": "大特写 | 特写 | 中特写 | 中景 | 全景 | 远景 | 航拍 | 主观视角 | 过肩镜头 | 仰拍 | 俯拍",
  "camera_movement": "固定 | 横移 | 推进 | 拉远 | 摇镜 | 俯仰 | 跟拍 | 缩放 | 稳定器移动 | 手持 | 旋转",

  "visual_style": "明亮 | 暗调 | 高饱和 | 低饱和 | 黑白 | 单色 | 复古 | 电影感 | 赛博朋克 | 小清新 | 噪点 | 柔光",
  "location": "城市街道 | 办公室 | 家 | 餐厅 | 商场 | 山区 | 森林 | 海边 | 海滩 | 湖泊 | 机场 | 工作室 | 绿幕",
  "time_of_day": "白天 | 黄昏 | 夜晚 | 黎明",
  "weather": "晴朗 | 多云 | 阴天 | 下雨 | 下雪 | 雾天 | 大风",

  "products": ["祛痘精华", "洁面乳"],
  "product_shot_angles": "正面 | 45度 | 侧面 | 背面 | 顶部 | 底部 | 手持 | 场景化摆放 | 包装特写",
  "brand_visibility": "清晰可见 | 模糊",

  "summary": "简短描述整个镜头内容和叙事（20-50字）",
  "detailed_desc": "详细描述镜头内容和叙事，包括画面主体、动作、环境氛围、色彩风格等（100-200字）",
  "content_vector": "对detailed_desc的向量表示（用于语义搜索）",

  "tags": ["快节奏", "慢动作", "转场可用"]
}
```

---

## 使用场景推演

### 搜索意图与查询条件对应表

#### 🎯 通用素材搜索

| 搜索意图 | 对应的查询条件 | 说明 |
|---------|---------------|------|
| "找一个快节奏、有动感的B-roll来匹配这段音乐" | `shot_category: "b-roll"` + `camera_movement: ["跟拍", "横移", "推进"]` + `duration: < 3` | 通过镜头运动和时长来定义"节奏感" |
| "找个空镜，要公司的办公室，看起来高科技感的" | `main_subjects: "场景元素"` + `location: "办公室"` + `tags: "科技感"` + `visual_style: "明亮"` | 组合地点、主体、风格和标签，精准定位 |
| "找所有用户看到产品后很开心笑的反应镜头" | `actions: "微笑"` + `emotions: "快乐"` + `products: ["产品A"]` | 用动作标签和情绪标签捕捉"反应" |
| "找一条已授权肖像的人物镜头，她正在自然地进行某项活动" | `tags: "已授权"` + `main_subjects: "人物"` + `actions: ["行走", "阅读", "交谈"]` | 法律安全是第一过滤器，避免版权风险 |
| "找所有Logo清晰可见的镜头" | `brand_visibility: "清晰可见"` | 品牌方极高频率的搜索需求 |

#### 🎨 营销与节日驱动

| 搜索意图 | 对应的查询条件 | 说明 |
|---------|---------------|------|
| "下周是母亲节，我要做一条促销视频，找点温馨的素材" | `narrative_function: "节日促销"` + `emotions: ["温馨", "快乐"]` + `visual_style: "高饱和"` + `time_of_day: "黄昏"` | 营销目标和情绪、视觉风格直接挂钩 |
| "我们需要一个展现'孤独感'的镜头来开篇" | `emotions: "悲伤"` + `tags: "孤独"` + `camera_angle: "全景"` | 抽象概念通过emotions和tags来具象化 |

#### 🛍️ 产品相关（品牌方核心）

| 搜索意图 | 对应的查询条件 | 说明 |
|---------|---------------|------|
| "找一个3秒钟的公司产品特写，具体是什么产品都行" | `camera_angle: "特写"` + `duration: < 5` + `products: *` | "products"字段存在即为公司产品 |
| "给我找产品A所有'45度角'拍摄的镜头" | `products: "产品A型号"` + `product_shot_angles: "45度"` | 电商视频和广告极高频查询 |
| "找一个产品B被真实使用的镜头，而不是摆拍" | `products: "产品B型号"` + `actions: "使用产品"` + `scene_type: ["室内", "室外"]` | 区分"广告摆拍"和"真实使用场景" |

#### 📊 高级叙事：前后对比

| 搜索意图 | 对应的查询条件 | 说明 |
|---------|---------------|------|
| 寻找"使用前"问题镜头 | `narrative_function: "问题展现"` 或 `tags: ["皮肤痘痘", "干燥"]` + `emotions: ["沮丧", "困惑"]` | 通过营销用途或具体标签快速定位 |
| 寻找"使用后"效果镜头 | `narrative_function: "效果展现"` 或 `tags: ["皮肤光滑", "满意"]` + `emotions: ["自信", "快乐"]` + `products: "祛痘膏"` | 结合营销用途、情绪和具体产品 |
| 寻找"对比"叙事模板参考 | `script_structure: "使用后对比"` + `products: "祛痘膏"` | 在Video-Level进行，找成片案例 |

### 关键设计原则

1. **`products` 字段是核心**：它的存在与否是区分"公司产品"和"普通物品"的关键
2. **`narrative_function` 是神器**：将抽象的营销目标直接映射到镜头属性上
3. **`tags` 字段是万能补充**：所有无法被结构化的抽象概念都交给它
4. **双层级查询是高级工作流**：
   - Shot-Level："找素材"
   - Video-Level："找灵感"和"复用模板"
5. **法律与品牌安全是底线**：`tags` 中的授权信息和 `brand_visibility` 是必须检查的过滤器

---

## 分镜脚本结构

在进行AI自动创作的过程中，AI输出的分镜脚本的结构，这个分镜脚本的内容应该要方便于寻找素材，比如搜索视频、序列或者镜头。

### Storyboard Structure

> 待补充...

---

## AI处理视频提示词

生成shot、sequence、video标签的提示词

> 待补充...

---

## 编导搜索场景

### 编导在利用历史素材时的常见搜索方法

#### 1. 场景与环境（Scene & Environment）
- "我需要一个阳光明媚的下午，在城市公园里的镜头。"
- "找找有没有夜晚在书店里的空镜。"
- "有没有下雨天，车窗外的街景？"

#### 2. 主体与动作（Subject & Action）
- "我需要一个女性，开心地笑着跑向镜头的画面。"
- "找一个产品的360度旋转展示镜头。"
- "有没有人们在会议室里激烈讨论的场景？"

#### 3. 情绪与氛围（Emotion & Atmosphere）
- "给我一些感觉温暖、治愈的画面。"
- "需要一些紧张、快节奏的镜头来做转场。"
- "找点孤独、安静的感觉。"

#### 4. 镜头语言（Cinematography）
- "我需要一个无人机航拍的大远景。"
- "找一个慢动作的特写镜头，焦点要实。"
- "有没有那种手持跟拍的、有呼吸感的镜头？"

#### 5. 构图与色彩（Composition & Color）
- "找一些对称构图的画面。"
- "需要一些主色调是蓝色的冷色系镜头。"
- "有没有前景虚化，主体突出的镜头？"